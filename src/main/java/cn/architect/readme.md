记录
三、复杂度来源：单台服务器变多台，单台负债均衡机器变多台(来源用户分配到不同负债均衡机，可DNS轮询、全局负债均衡器等)，多对多情况。这是在业务不变的情况下提升性能。
但若业务越来越负债，则单台服务器处理性能会产生瓶颈，就需要对业务的拆分了，比如微信拆分了漂流瓶、聊天等模块，并不是越细越好，不同模块之间调用的网络传输也占用了时间，比如1ms

换个角度看，其实可通过垂直和水平两个维度做高性能，垂直针对单台服务，软硬件提升，增加内存减少I/O，升级网络接口。
水平针对集群系统主要通过任务分配和任务分解提升。功能分解、多实例副本、数据分割比如MongoDB数据分片。

四、高可用来源：主要技术手段是服务与数据的冗余备份和失效转移。在于系统“无中断”，通过“冗余”解决，增加机器，或机房。通道可能故障，则用两条甚至三条(移动电信联通)。增加机器需要任务分配器，双机分配器算法常见的有主备(冷备、温备、热备)、主主。而还有高可用集群，分配算法有1主3备，2主2备...4主0备等，zookeeper是1主多备，memcached是全主0备。
    计算高可用只需要加机器即可，存储高可用要考虑数据不一致问题。比如数据传输，尤其是跨机房，带来的延迟以及网络异常情况。也是CAP定理，即一致性、可用性、分区容错性，最多同时满足两个。
    冗余的高可用系统，状态决策相当重要，而一般有几种类型，独裁式(决策者本身可能有问题)、协商式(比如主备通信，协商选决策者。主备之间可能连接中断导致信息交换失败)、民主式(比如zookeeper集群通过多个独立个体投票进行状态决策，多数取胜，算法Paxos。另外也会有脑裂问题，即多决策者)，记得和朋友聊过，还可以通过每间隔一段时间争抢缓存锁(缓存值有过期时间)来选主。
    
    硬件故障引起的技术解决措施：1应用服务器(实现业务逻辑)，通过负载均衡构建集群(这些服务需要为无状态、即应用服务器不保存业务上下文)，通过心跳监控是否服务正常，不正常则剔除。2服务层服务器，一般通过rpc提供服务(例如dubbo)，给应用服务调用。3数据服务器，需在数据写入时进行数据同步复制，将数据写入多台服务器，实现冗余备份，当数据服务器宕机，应用程序切换到有备份的机器。
    软件一起的不可用解决措施：通过开发流程进行保证。比如通过预发布验证、测试、灰度发布等。
